# ASVZINATOR

from bs4 import BeautifulSoup
import requests

BASE_URL = "https://schalter.asvz.ch"
SUB_URL = "/tn-mvc/Event/Lesson/Detail/"

RESERVATION_URL = "/tn-mvc/Registration/Reservation/MakeReservation/"

course_id = "608545"

cookies = {
    '.AspNet.ApplicationCookie': 'ENhR3DSsKKpgp6zAqPyhg4wTRL0Lh6bXV8q47E0jh7XF-MqdrABRS6wqD9kJRpfXoVhww62JKSa8RTMDyd4GsfBZY79H9LF8W0Wy9dPTraOYE6h5h2QW4K2C-eYL3RqEUO0a1wrJTjKze1Mv6tpI7sI22V9EZ_YM5vatW4LCUfkgm1zIrTaSnMaK1qCUztwxXhNtIWnmaxmMYuRFHrUzdYoSa0J2c2i5PZBin19jETBDuogCP2-s7kmhZ6LDJoY9NImj-t5vy1yuLZ_PRMAKVeTfzX3oZrosakIzolOvf606d5XYCdL-IAMMxhM_T9Q0aN1prhf0RDTodzvrl5xRn6q3PcsOItN5kojRcLCpVjpKOP2MWOvOlLdYIeOboYNCiMhJRA3gn7K7fXU4TmWyvEf1spA8Q8RnhQdKJrdgHNuPxh0yi8nPKjCpBVAO91-7mGx9pAGMoNCsAdEfD06EMQi50bjWKTespspV7LXOWEWkV29dBZzMl9y1y6hVZwD3qo64P1fzeNKg_PJ2t6vLzhIwIb1ftmR7b7yZsHpZGRzo-8-0srFFp3ZOtjm0-J-b523q5WGJFX4JmWoi8hh9K9AOJr4bvZ8ZPm08GhiRx1_9r0I-NdwovQvwCFbqGlt9dznPFILEbQA2_ggVcADwiU9aES1o7tcd6B_cQMcxX1R-8hL17MStFPnXA6WLXjxBjmzTYqK57hrPkNaTwZAklZy0BFE',
    'ASP.NET_SessionId': 'qzdrlhxbhn4ecntgx4nnuvxy',
    'FedAuth': '77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48U2VjdXJpdHlDb250ZXh0VG9rZW4gcDE6SWQ9Il9jZDEwNTBkMC00ODYzLTQ3MjEtYjIwYS0zYWNiYzg1MWE0ZjQtOUJFMzcxRjE5ODhFRTI1OUM3N0FEOUNBQUUyRjMyMzUiIHhtbG5zOnAxPSJodHRwOi8vZG9jcy5vYXNpcy1vcGVuLm9yZy93c3MvMjAwNC8wMS9vYXNpcy0yMDA0MDEtd3NzLXdzc2VjdXJpdHktdXRpbGl0eS0xLjAueHNkIiB4bWxucz0iaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvd3Mtc3gvd3Mtc2VjdXJlY29udmVyc2F0aW9uLzIwMDUxMiI+PElkZW50aWZpZXI+dXJuOnV1aWQ6M2JkZWViNzktODRkNC00ZDA4LTgwZWUtM2RiMjI3MjVlYzg0PC9JZGVudGlmaWVyPjxDb29raWUgeG1sbnM9Imh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwNi8wNS9zZWN1cml0eSI+THhDVXRONjAwM1o3UnNzRk03NWk3a1V5eFA5VzBnOFFRWExnRmhjSS9LMmhFR1pXR1lyNXVGV1VYNWpETk1nK2RqQ25uc2JvMWg3djJDOUJzemVHWDJmMFg2M2J6WExOc2JnT0diazN0RkxhUzVtcVBoVWozd21Oc0FmeVQ1Njg4dUhTaU9oQ0lmT1JGSDRsdjEyZytJd0lsTlMxVzlWbkZqWVJ5V3BsNk5qWmNwQTlzRURzMjNUSlp4NGhjUDdWMjA1WXp2NlVhb2N4M2ZJSERFRkZKd3lINCtDRUVCS2RmSkY3TzlGZWRhNk9aN0NiLzBNdExTMlhWS2FhNTkvbk5QUlU2Zy9EODQ3cDdYZHc5WnlkYitRczl1aXBrY0xnMFZsTlZuSVE5QWVXQUVvV1VpQU1xVlNDcXpRdVN3WllVaU5JOG5YNThRdEh5NkxNYlVIK1RaMnY3YjcxbXlORjkrZ3RvakNiSWoreWMzbm9HOFlFSFRObWZBQ096dTFGYUpSSzhTY1I5R3JTOFltWVplaVZvdllVaWh5ZkhBeDQ3cTJ5cTlOYWNqN3V6ZTFzYlE5MUVIUHYyNTAzb2hHU1pTVmdpVEtKcnpDQjFoWTFWWThiQ3FMSHNqRXZ0Qmg4TlkxWXEvOHo2UmpVK3BwZ2o5ZnpvcWFQUGNuVERaa1k5cU0xYlgrNC9UbjhJK3AzUWpLaUlLSGZXd0NXT2UxL2NjTnZjS1JNRXdVdlBPSElwQmo0VWdtalBKbUVBaVZTU1dtUU5tSU56SVI0dGUxVS9xVDZPZzBldlBTRjc2RUFTNCtYRDBTNjF3eVNNbnZndGtlckJ0VWkwTUVZbjF1T05HRjFlRDNKb2FqT3RwZVFISE9meWRXbytpRmppY240UUYxSDNBNXlIUVZVa0NMWkIvelQxOURGVnB0amgwdlFEbDhlVldOL0RPMmwxV0syMkhrOEIvTmo0bzJnaGoxVFRuczNHdWZwajIrbmUzZUFFV2dsU3B4eVVzUzV3NkZSTHp5YWQ1VHhmZGtUb0JoSXNMYnBvb1ZqejAxV1JtMjVFL3ZkRGFKK01jVjhyNVRlUGVMQjlqR0FZWEYvUU80VEJuT0hjaEJheDFObS9lUldSa2lOemRHS3V4ZVdGa3RWdjJTd2pnbVYvOHdMMnhxbWZKK29qeE5hUGt4NFRvaHFXOS9rWFM2dW8wUXNQTTdzVGFJVjJORUt1Wjc3UlU3cG4wTVVFV1Q4enBOWnd0RFFFNVE3RzdmU1pNbUNGa2lqOFhaS0ZydTZrNDh0UlMwdHoxaWNjZ3g1dnkrMTRHYXhPN0xGendjZ2NCU0gzVzluR3dBdDRiKzVSZmtMS3d5cFZpeE84Z3NYUzFmVlhqN2dxSWhyMFJKMG5rMlNWTXFEL2FC',
    'FedAuth1': 'OTBPTjFweHNTRWxuVTc1TGwvUFkzSXlBWElYb1FOdVRjVFY5U3pkaVdHbHhKVmVBaElqK2ttV2NkZXM4TEZjKzdGL0o5YUtDbzZtTTlsY045SkVlSlRvQmFGK3lLb3pqZ0hBPT08L0Nvb2tpZT48L1NlY3VyaXR5Q29udGV4dFRva2VuPg==',
    '__RequestVerificationToken_L3RuLW12Yw2': 'siqonlQbFp1qYUdXrK2u3TudHuTehSngM4iMQ44uIcka4GXZWvV_yGhcN39ubf-65kJCBZ-LdATAlZWUh0WiCeYcwa81',
    '_shibsession_64656661756c7468747470733a2f2f736368616c7465722e6173767a2e63682f73686962626f6c657468': '_6bcaa6e327c1d9b13deb5bf3fc49b2a5',
    'jwt_token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTM4NCJ9.eyJuYW1laWQiOiIxMjdkNjA0ZC05ODU2LTRkODYtYTA2Ny0zZjZlZGUyYWUwY2IiLCJ1bmlxdWVfbmFtZSI6IjU1OTIwIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9hY2Nlc3Njb250cm9sc2VydmljZS8yMDEwLzA3L2NsYWltcy9pZGVudGl0eXByb3ZpZGVyIjoiQVNQLk5FVCBJZGVudGl0eSIsIkFzcE5ldC5JZGVudGl0eS5TZWN1cml0eVN0YW1wIjoiMjcyMzVlOTItZjc1OC00MDQ2LTk5NTYtNDZkYWUwOTFhMjRkIiwiaHR0cDovL3NjaGFsdGVyLmFzdnouY2gvMjAxNC8wNC9pZGVudGl0eS9jbGFpbXMvYWRtaW4iOiJGYWxzZSIsImdpdmVuX25hbWUiOiJNaWNoZWxsZSIsImZhbWlseV9uYW1lIjoiUm9zZW5iZXJnZXIgTG9tZWxpIiwiZW1haWwiOiJtaWNoZWxsZS5yb3NlbmJlcmdlckBlY29uLnV6aC5jaCIsImh0dHA6Ly9zY2hhbHRlci5hc3Z6LmNoLzIwMTQvMDQvaWRlbnRpdHkvY2xhaW1zL2lzdmFsaWR1c2VyIjoiVHJ1ZSIsImh0dHA6Ly9zY2hhbHRlci5hc3Z6LmNoLzIwMTQvMDQvaWRlbnRpdHkvY2xhaW1zL2lzc3lzdGVtdXNlciI6IkZhbHNlIiwiaHR0cDovL3NjaGFsdGVyLmFzdnouY2gvMjAxNC8wNC9pZGVudGl0eS9jbGFpbXMvdXNlcmlkIjoiMTI3ZDYwNGQtOTg1Ni00ZDg2LWEwNjctM2Y2ZWRlMmFlMGNiIiwiaHR0cDovL3NjaGFsdGVyLmFzdnouY2gvMjAxNC8wNC9pZGVudGl0eS9jbGFpbXMvcGVyc29uaWQiOiI1NTkyMCIsImh0dHA6Ly9zY2hhbHRlci5hc3Z6LmNoLzIwMTQvMDQvaWRlbnRpdHkvY2xhaW1zL2xhc3Rsb2dpbmRhdGUiOiIwMy8xNS8yMDE4IDIxOjM4OjQ2IiwiaHR0cDovL3NjaGFsdGVyLmFzdnouY2gvMjAxNC8wNC9pZGVudGl0eS9jbGFpbXMvdXNlcm5hbWUiOiI1NTkyMCIsImlzcyI6Imh0dHBzOi8vdGVzdC5zY2hhbHRlci5hc3Z6LmNoL2F1dGgiLCJhdWQiOiIwZTY3MjA5MzA5MDMyZTc3OWY2NDk1ZTEwMjIyNjc1NTVmNzViOTAwNjc1NmMzYmNlYTgxYzFlZWY2YzUzZmVlIiwiZXhwIjoxNTIxMTc1MTI2LCJuYmYiOjE1MjExNDYzMjZ9.tTk5wq-dlr7UF_yxTwHuIYmPJIdp9wEUiYyqc9o9R4VbatnWfpo1UtolBVvREAWU'
    
}

page = requests.get(BASE_URL + SUB_URL + course_id, cookies=cookies)
soup = BeautifulSoup(page.content, 'html.parser')

form = soup.select('form[action='+RESERVATION_URL + course_id + '] input')


verification_token = form[0]['value']

payload = {'__RequestVerificationToken': verification_token}

headers = {'Referer': 'https://schalter.asvz.ch/tn-mvc/Event/Lesson/Detail/608545'}

r = requests.post(BASE_URL + RESERVATION_URL + course_id, data=payload, headers=headers)

print(r.text)